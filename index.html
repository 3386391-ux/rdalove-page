<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>Êàë‰ª¨ÁöÑËÆ¢Â©öÂÄíËÆ°Êó∂</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <link rel="preload" href="background.jpg" as="image">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { 
      height: 100%; 
      font-family: Arial, sans-serif; 
      color: white; 
      overflow: hidden; 
      background: 
        linear-gradient(to bottom, rgba(0,0,0,0.6) 0%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.6) 100%), 
        url('background.jpg') no-repeat center center; 
      background-size: cover; 
      background-attachment: scroll;
      position: relative; 
    }
    .overlay { background-color: rgba(0,0,0,0.4); position: absolute; inset: 0; z-index: 1; }
    .content { position: relative; z-index: 2; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 1rem; }
    h1 { font-size: clamp(1.5rem, 4vw, 2rem); margin-bottom: 1rem; font-weight: bold; }
    .timer-container { font-size: 1.1rem; text-align: center; margin-bottom: 0.5rem; }
    .timer-container > div:first-child { margin-bottom: 10px; }
    .heart { display: inline-block; font-size: 2rem; animation: heartbeat 1.5s ease-in-out infinite; transform-origin: center; }
    @keyframes heartbeat { 0%,20%,40%,100%{transform:scale(1);} 10%,30%{transform:scale(1.3);} }
    .quote { font-size: 1rem; margin-top: 1rem; max-width: 80%; line-height: 1.5; font-style: italic; min-height: 2.5rem; white-space: pre-wrap; position: relative; word-break: break-word; }
    .quote::after { content: "|"; position: absolute; animation: blink 1s infinite; }
    @keyframes blink { 0%,50% { opacity: 1; } 51%,100% { opacity: 0; } }
    .music-control { margin-top: 1.5rem; }
    .music-control button { padding: .6rem 1.2rem; font-size: 1rem; border: none; border-radius: .5rem; cursor: pointer; background-color: rgba(255,255,255,.2); color: white; transition: .3s; }
    .music-control button:hover { background-color: rgba(255,255,255,.4); }
    .particles { position: fixed; inset: 0; pointer-events: none; z-index: 0; }
    audio { display: none; }

    @media (min-width: 768px) {
      body { background-attachment: fixed; }
      h1 { font-size: clamp(2rem, 5vw, 3rem); }
      .content { padding: 2rem; }
      .quote { max-width: 60%; font-size: 1.2rem; }
    }

    @media (min-width: 1024px) {
      h1 { font-size: clamp(2.5rem, 6vw, 4rem); }
      .quote { max-width: 50%; }
      .music-control button { padding: 0.8rem 1.5rem; font-size: 1.2rem; }
    }
  </style>
</head>
<body>
  <div class="overlay"></div>
  <canvas class="particles"></canvas>
  <div class="content">
    <!-- Êõ¥Êñ∞Ê†áÈ¢òÔºåÊòæÁ§∫‰∏∫ËÆ¢Â©öÂÄíËÆ°Êó∂ -->
    <h1>Ë∑ùÁ¶ªÊàë‰ª¨ËÆ¢Â©öËøòÊúâ <span id="countdownDays"></span> Â§© <span class="heart">‚ù§Ô∏è</span></h1>
    <div class="timer-container" id="beijingTimeContainer">
      <div id="datePart"></div>
      <div id="timePart"></div>
    </div>
    <!-- ‰øÆÊîπÂºïÂè∑‰∏∫ËÆ¢Â©öÁõ∏ÂÖ≥ÁöÑËØ≠Âè• -->
    <div class="quote" id="quote"></div>
    <div class="music-control">
      <button id="musicToggle">Êí≠ÊîæÈü≥‰πê üéµ</button>
    </div>
  </div>
  <audio id="bgm" loop preload="none">
    <source src="music.mp3" type="audio/mpeg">
  </audio>

  <script>
    (function() {
      "use strict";

      const CONFIG = {
        // Â∞ÜÊó•Êúü‰øÆÊîπ‰∏∫ËÆ¢Â©öÊó•ÊúüÔºö2026Âπ¥3Êúà7Êó•
        startDate: new Date("2026-03-07T00:00:00Z"),
        quotes: [
          "Âíå‰Ω†Âú®‰∏ÄËµ∑ÁöÑÊØè‰∏ÄÂ§©ÔºåÈÉΩÊòØÊàëÊúÄÂπ∏Á¶èÁöÑÊó∂ÂÖâ„ÄÇ",
          "ËÆ¢Â©öÁöÑÈÇ£‰∏ÄÂ§©ÔºåÊòØÊàë‰ª¨Áà±ÊÉÖÊïÖ‰∫ãÁöÑÊñ∞ÁØáÁ´†„ÄÇ",
          "Êó†ËÆ∫Êó∂ÂÖâÂ¶Ç‰ΩïÊµÅËΩ¨ÔºåÊàëÂ∞ÜÊ∞∏ËøúÁà±‰Ω†„ÄÇ",
          "Êàë‰ª¨‰∏ÄËµ∑Ëµ∞ËøáÁöÑÊØè‰∏ÄÊ≠•ÔºåÈÉΩÂÖÖÊª°‰∫ÜÁà±ÂíåÊúüÂæÖ„ÄÇ",
          "‰Ω†ÊòØÊàëÊ≠§ÁîüÊúÄÁæéÁöÑÈÅáËßÅÔºåÊÑüË∞¢ÂëΩËøêËÆ©Êàë‰ª¨Áõ∏ÈÅá„ÄÇ",
          "‰ªéÊ≠§‰ª•ÂêéÔºåÊàëÁöÑ‰∏ñÁïåÈáåÊ∞∏ËøúÂè™Êúâ‰Ω†„ÄÇ",
          "Âíå‰Ω†ÂÖ±Â∫¶ÊØè‰∏ÄÂàªÔºåÊàëÊòØÂ¶ÇÊ≠§Âπ∏Ëøê„ÄÇ",
          "Êàë‰ª¨ÁöÑÊïÖ‰∫ãÔºåÊ∞∏Ëøú‰∏ç‰ºöÁªìÊùüÔºåÂè™‰ºöË∂äÊù•Ë∂äÁæéÂ•Ω„ÄÇ",
          "ÊØè‰∏™ÊÑøÊúõÔºåÈÉΩÊòØ‰∏é‰Ω†ÂÖ±Â∫¶Êú™Êù•ÁöÑÊ¢¶ÊÉ≥„ÄÇ",
          "‰ªäÂ§©ÁöÑ‰Ω†ÔºåÊòØÊàëÊúÄÊÉ≥ÂÆàÊä§ÁöÑ‰∫∫ÔºåÊòéÂ§©ÁöÑ‰Ω†ÔºåÊõ¥ÊòØ„ÄÇ",
          "Ëøô‰∏ÄÁîüÔºåÊàëÊÑøÊÑè‰∏é‰Ω†Êê∫ÊâãÔºåËµ∞ÈÅçÊØè‰∏Ä‰∏™Êô®Êòè„ÄÇ",
          "‰Ω†ÁöÑÁ¨ëÂÆπÊòØÊàëÊúÄÊ∏©ÊöñÁöÑÈò≥ÂÖâÔºåÁÖß‰∫ÆÊàëÁöÑ‰∫∫Áîü„ÄÇ",
          "ËÆ¢Â©öÔºåÂè™ÊòØÂºÄÂßãÔºåÊú™Êù•ÁöÑË∑ØÔºåÊàë‰ª¨‰∏ÄÂêåËµ∞„ÄÇ",
          "‰Ω†ÊòØÊàëËøô‰∏ÄÁîüÊúÄÊÉ≥‰æùÈù†ÁöÑ‰∫∫„ÄÇ",
          "Áà±‰Ω†ÔºåÊòØÊàëÊúÄÂπ∏ËøêÁöÑ‰∫ã„ÄÇ",
          "Âíå‰Ω†Âú®‰∏ÄËµ∑Ôºå‰∏ñÁïåÂ∞±ÊòØÊúÄÂÆåÁæéÁöÑÊ®°Ê†∑„ÄÇ",
          "ÊàëÁà±‰Ω†ÔºåÁõ¥Âà∞Êó∂Èó¥ÁöÑÂ∞ΩÂ§¥„ÄÇ"
        ]
      };

      const countdownDaysEl = document.getElementById("countdownDays");
      const datePartEl = document.getElementById("datePart");
      const timePartEl = document.getElementById("timePart");
      const quoteEl = document.getElementById("quote");
      const audio = document.getElementById("bgm");
      const toggleBtn = document.getElementById("musicToggle");
      const canvas = document.querySelector(".particles");
      const ctx = canvas.getContext("2d");
      let particles = [];
      let shuffledQuotes = [...CONFIG.quotes].sort(() => Math.random() - 0.5);
      let quoteIndex = 0;

      function throttle(fn, delay) {
        let timer;
        return function() {
          if (!timer) {
            timer = setTimeout(() => { fn(); timer = null; }, delay);
          }
        };
      }

      function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        const particleCount = window.innerWidth < 768 ? 15 : 30;
        if (particles.length !== particleCount) {
          particles = Array.from({ length: particleCount }, createParticle);
        }
      }

      function createParticle() {
        return {
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height,
          size: Math.min(8 * Math.random() + 4, window.innerWidth * 0.015),
          speed: Math.random() + 0.5,
          opacity: Math.random()
        };
      }

      function drawParticles() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "rgba(255,100,150,0.6)";
        particles.forEach(p => {
          ctx.globalAlpha = p.opacity;
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.size / 2, 0, Math.PI * 2);
          ctx.fill();
          p.y -= p.speed;
          if (p.y < -20) Object.assign(p, createParticle(), { y: canvas.height + 10 });
        });
        ctx.globalAlpha = 1;
      }

      function updateCountdownDays() {
        const now = new Date();
        const countdownDays = Math.floor((Date.UTC(CONFIG.startDate.getFullYear(), CONFIG.startDate.getMonth(), CONFIG.startDate.getDate()) - Date.UTC(now.getFullYear(), now.getMonth(), now.getDate())) / 86400000);
        countdownDaysEl.textContent = countdownDays;
        const nextDay = new Date(Date.UTC(now.getFullYear(), now.getMonth(), now.getDate() + 1));
        setTimeout(updateCountdownDays, nextDay - now);
      }

      function updateBeijingTime() {
        const now = new Date();
        const formatter = new Intl.DateTimeFormat('zh-CN', {
          timeZone: 'Asia/Shanghai',
          year: 'numeric', month: '2-digit', day: '2-digit',
          weekday: 'long', hour: '2-digit', minute: '2-digit', second: '2-digit',
          hour12: false
        });
        const parts = formatter.formatToParts(now);
        const year = parts.find(p => p.type === 'year').value;
        const month = parts.find(p => p.type === 'month').value;
        const day = parts.find(p => p.type === 'day').value;
        const weekday = parts.find(p => p.type === 'weekday').value;
        const hours = parts.find(p => p.type === 'hour').value;
        const minutes = parts.find(p => p.type === 'minute').value;
        const seconds = parts.find(p => p.type === 'second').value;
        datePartEl.textContent = `${year}Âπ¥${month}Êúà${day}Êó• ${weekday}`;
        timePartEl.textContent = `${hours}:${minutes}:${seconds}`;
      }

      function typeWriter(text, callback) {
        quoteEl.textContent = '';
        let i = 0;
        const interval = setInterval(() => {
          quoteEl.textContent += text.charAt(i);
          i++;
          if (i >= text.length) {
            clearInterval(interval);
            if (callback) setTimeout(callback, 2000);
          }
        }, 210);
      }

      function playQuotes() {
        const quote = shuffledQuotes[quoteIndex];
        typeWriter(quote, () => {
          quoteIndex = (quoteIndex + 1) % shuffledQuotes.length;
          if (quoteIndex === 0) shuffledQuotes = [...CONFIG.quotes].sort(() => Math.random() - 0.5);
          playQuotes();
        });
      }

      function fadeAudio(targetVolume, duration = 500, callback) {
        const startVolume = audio.volume;
        const startTime = performance.now();
        function step(now) {
          const progress = Math.min((now - startTime) / duration, 1);
          audio.volume = startVolume + (targetVolume - startVolume) * progress;
          if (progress < 1) {
            requestAnimationFrame(step);
          } else if (callback) callback();
        }
        requestAnimationFrame(step);
      }

      toggleBtn.addEventListener("click", () => {
        if (audio.paused) {
          audio.volume = 1;
          audio.play().then(() => {
            toggleBtn.textContent = "ÊöÇÂÅúÈü≥‰πê ‚è∏Ô∏è";
          });
        } else {
          fadeAudio(0, 500, () => {
            audio.pause();
            toggleBtn.textContent = "Êí≠ÊîæÈü≥‰πê üéµ";
          });
        }
      });

      addEventListener("resize", throttle(resizeCanvas, 200));
      resizeCanvas();

      document.addEventListener("DOMContentLoaded", () => {
        playQuotes();
        updateCountdownDays();
        updateBeijingTime();
        setInterval(updateBeijingTime, 1000);
      });

      (function animateParticles() {
        drawParticles();
        requestAnimationFrame(animateParticles);
      })();
    })();
  </script>
</body>
</html>
